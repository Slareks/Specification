Репозиторий для автоматизированного аудита и мониторинга конфигурации **sshd** с использованием Ansible, Python и Docker. 

Файловая структура:

- `roles/ssh_audit/` — Ansible-роль для проверки конфигурации sshd.  
- `eda_job_monitor/` — модуль мониторинга исполнения ролей.  
- `docker/Dockerfile` — сборка контейнера с ролью.  
- `entrypoint.sh` — скрипт запуска роли внутри контейнера.  
- `.gitlab-ci.yml` — CI/CD-пайплайн для запуска роли.  
- `scripts/parse_ssh_config.py` — утилита для анализа `sshd_config`.  
- `README.md` — документация по сборке, запуску и тестированию.  
- `example_logs/` — примеры логов (compliant / non-compliant / monitoring).

- ###docker
- Содержит в себе докерфайл, который позволяет собрать образ с Ansible-ролью для мониторинга SSHD_config файла.

- ### Сборка контейнера
docker build -t ssh-audit .

- ### Скрипт parse_sshd_config
- Запускается через командную строку "python parse_sshd_config.py {путь до sshd_config} {путь до JSON-файла со значениями для проверки}.
- После выполнения скрипт создает один из двух JSON логов. Compliant и Non-compliatnt. Примеры приведены в папке example_logs

- ### Примеры логов
Примеры логов для проверки результатов находятся в каталоге:
example_logs

`json_log_compliant.json` - Содержит в себе логи от запуска Python-скрипта parse_sshd_config при несоответствии заданным значениям
`json_log_non_compliant.json` - Содержит в себе логи от запуска Python-скрипта parse_sshd_config при соответствии заданным значениям

- ### Roles
- Содержит роль для проверки sshd_config.
- Папка defaults содержит в себе файл main.yml в котором указаны проверяемые значения.
- Папка taks содержит в себе файл main.yml в котором указаны задачи для проведения аудита файла sshd_config.

- ### EDA_job_monitor
- Содержит в себе скрипт, который при запуске проверяет контейнеры на время запуска и если он не запускался в последние 24 часа, то в консоль выводится сообщение о том, что с контейнером что-то не так.
